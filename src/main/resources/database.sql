-- MySQL Script generated by MySQL Workbench
-- Thu Aug  3 08:54:06 2017
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- Schema mydb
-- -----------------------------------------------------
-- -----------------------------------------------------
-- Schema access
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema access
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `access` DEFAULT CHARACTER SET utf8 ;
USE `access` ;

-- -----------------------------------------------------
-- Table `access`.`administrator`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `access`.`administrator` (
  `ad_id` INT(11) NOT NULL,
  `ad_password` VARCHAR(45) NULL DEFAULT NULL,
  `ad_username` VARCHAR(45) NULL DEFAULT NULL,
  `ad_phone` VARCHAR(45) NULL DEFAULT NULL,
  `ad_mailbox` VARCHAR(45) NULL DEFAULT NULL,
  PRIMARY KEY (`ad_id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `access`.`company`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `access`.`company` (
  `cp_id` INT(11) NOT NULL,
  `cp_password` VARCHAR(45) NULL DEFAULT NULL,
  `cp_name` VARCHAR(45) NULL DEFAULT NULL,
  `cp_address` VARCHAR(255) NULL DEFAULT NULL,
  `cp_phone` VARCHAR(45) NULL DEFAULT NULL,
  `cp_mail` VARCHAR(45) NULL DEFAULT NULL,
  `cp_servicequantity` VARCHAR(45) NULL DEFAULT NULL,
  `cp_level` VARCHAR(45) NULL DEFAULT NULL,
  `cp_konwledgebasepath` VARCHAR(255) NULL DEFAULT NULL,
  PRIMARY KEY (`cp_id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `access`.`category`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `access`.`category` (
  `id` INT(11) NOT NULL,
  `account` INT(11) NULL DEFAULT NULL,
  `type` VARCHAR(45) NULL DEFAULT NULL,
  `company_id` INT(11) NULL DEFAULT NULL,
  `pic` VARCHAR(255) NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `FK_category_company_idx` (`company_id` ASC),
  CONSTRAINT `FK_category_company`
    FOREIGN KEY (`company_id`)
    REFERENCES `access`.`company` (`cp_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `access`.`customerservicerole`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `access`.`customerservicerole` (
  `id` INT(11) NOT NULL,
  `type` VARCHAR(45) NULL DEFAULT NULL,
  `level` INT(11) NULL DEFAULT NULL,
  `companyid` INT(11) NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `FK_servicerole_company_idx` (`companyid` ASC),
  CONSTRAINT `FK_servicerole_company`
    FOREIGN KEY (`companyid`)
    REFERENCES `access`.`company` (`cp_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `access`.`customerservice`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `access`.`customerservice` (
  `cs_id` INT(11) NOT NULL,
  `cs_password` VARCHAR(45) NOT NULL,
  `cs_username` VARCHAR(45) NOT NULL,
  `cs_name` VARCHAR(45) NULL DEFAULT NULL,
  `cs_phone` VARCHAR(45) NULL DEFAULT NULL,
  `cs_sex` ENUM('男', '女') NULL DEFAULT '男',
  `cs_registtime` DATETIME NULL DEFAULT NULL,
  `company_id` INT(11) NULL DEFAULT NULL,
  `cs_window` INT(11) NULL DEFAULT NULL,
  `cs_status` VARCHAR(45) NULL DEFAULT '客服',
  `cs_level` INT(11) NULL DEFAULT NULL,
  `cs_role` INT(11) NULL DEFAULT NULL,
  PRIMARY KEY (`cs_id`),
  INDEX `FK_company_id_idx` (`company_id` ASC),
  INDEX `FK_service_role_idx` (`cs_role` ASC),
  CONSTRAINT `FK_company_id`
    FOREIGN KEY (`company_id`)
    REFERENCES `access`.`company` (`cp_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `FK_service_role`
    FOREIGN KEY (`cs_role`)
    REFERENCES `access`.`customerservicerole` (`id`)
    ON DELETE SET NULL
    ON UPDATE SET NULL)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `access`.`customer`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `access`.`customer` (
  `ct_id` INT(11) NOT NULL,
  `ct_password` VARCHAR(45) NOT NULL,
  `ct_username` VARCHAR(45) NULL DEFAULT NULL,
  `ct_name` VARCHAR(45) NULL DEFAULT NULL,
  `ct_phone` VARCHAR(45) NULL DEFAULT NULL,
  `ct_mailbox` VARCHAR(45) NULL DEFAULT NULL,
  `ct_sex` ENUM('男', '女') NULL DEFAULT '男',
  `ct_ip` VARCHAR(45) NULL DEFAULT NULL,
  `ct_level` DOUBLE NULL DEFAULT NULL,
  `ct_registtime` DATETIME NULL DEFAULT NULL,
  `company_id` INT(11) NULL DEFAULT NULL,
  PRIMARY KEY (`ct_id`),
  INDEX `FK_company_id_idx` (`company_id` ASC),
  INDEX `FK_company_customer_idx` (`company_id` ASC),
  CONSTRAINT `FK_company_customer`
    FOREIGN KEY (`company_id`)
    REFERENCES `access`.`company` (`cp_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `access`.`chatonline`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `access`.`chatonline` (
  `customer_id` INT(11) NOT NULL,
  `customerservice_id` INT(11) NOT NULL,
  `begintime` DATETIME NULL DEFAULT NULL,
  PRIMARY KEY (`customer_id`, `customerservice_id`),
  INDEX `fk_chatonline_costomerservice1_idx` (`customerservice_id` ASC),
  CONSTRAINT `fk_chatonline_costomerservice1`
    FOREIGN KEY (`customerservice_id`)
    REFERENCES `access`.`customerservice` (`cs_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_chatonline_customer1`
    FOREIGN KEY (`customer_id`)
    REFERENCES `access`.`customer` (`ct_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `access`.`companyrfm`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `access`.`companyrfm` (
  `id` INT(11) NOT NULL AUTO_INCREMENT,
  `company_id` INT(11) NULL DEFAULT NULL,
  `a0` INT(22) NULL DEFAULT NULL,
  `a1r` INT(22) NULL DEFAULT NULL,
  `a2f` INT(22) NULL DEFAULT NULL,
  `a3m` INT(22) NULL DEFAULT NULL,
  `updatetime` DATETIME NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `FK_companyrfm_company_idx` (`company_id` ASC),
  CONSTRAINT `FK_companyrfm_company`
    FOREIGN KEY (`company_id`)
    REFERENCES `access`.`company` (`cp_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `access`.`conversation`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `access`.`conversation` (
  `id` INT(11) NOT NULL AUTO_INCREMENT,
  `begintime` DATETIME NULL DEFAULT NULL,
  `endtime` DATETIME NULL DEFAULT NULL,
  `keyword` VARCHAR(255) NULL DEFAULT NULL,
  `degree` VARCHAR(45) NULL DEFAULT NULL,
  `customer_id` INT(11) NOT NULL,
  `costomerService_id` INT(11) NULL DEFAULT NULL,
  `firstkeyword` VARCHAR(255) NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_coversation_customer1_idx` (`customer_id` ASC),
  INDEX `fk_coversation_costomerservice1_idx` (`costomerService_id` ASC),
  CONSTRAINT `fk_coversation_costomerservice1`
    FOREIGN KEY (`costomerService_id`)
    REFERENCES `access`.`customerservice` (`cs_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_coversation_customer1`
    FOREIGN KEY (`customer_id`)
    REFERENCES `access`.`customer` (`ct_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
AUTO_INCREMENT = 504
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `access`.`customerloginrecord`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `access`.`customerloginrecord` (
  `id` INT(11) NOT NULL AUTO_INCREMENT,
  `ipaddr` VARCHAR(255) NULL DEFAULT NULL,
  `area` VARCHAR(255) NULL DEFAULT NULL,
  `logintime` DATETIME NULL DEFAULT NULL,
  `customer_id` INT(11) NULL DEFAULT NULL,
  `referer` VARCHAR(255) NULL DEFAULT NULL,
  `browserinfo` VARCHAR(255) NULL DEFAULT NULL,
  `hostname` VARCHAR(45) NULL DEFAULT NULL,
  `systeminfo` VARCHAR(255) NULL DEFAULT NULL,
  `macaddr` VARCHAR(255) NULL DEFAULT NULL,
  `region` VARCHAR(255) NULL DEFAULT NULL,
  `refererkeyword` VARCHAR(255) NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_customerloginrecord_customer1_idx` (`customer_id` ASC),
  CONSTRAINT `fk_customerloginrecord_customer1`
    FOREIGN KEY (`customer_id`)
    REFERENCES `access`.`customer` (`ct_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
AUTO_INCREMENT = 582
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `access`.`terminaltype`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `access`.`terminaltype` (
  `id` INT(11) NOT NULL,
  `type` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `access`.`terminal`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `access`.`terminal` (
  `id` INT(11) NOT NULL,
  `identification` VARCHAR(45) NULL DEFAULT NULL,
  `terminaltype_id` INT(11) NOT NULL,
  `status` ENUM('客服', '客户') NOT NULL,
  `statusid` INT(11) NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_terminal_terminaltype1_idx` (`terminaltype_id` ASC),
  CONSTRAINT `fk_terminal_terminaltype1`
    FOREIGN KEY (`terminaltype_id`)
    REFERENCES `access`.`terminaltype` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `access`.`customeronline`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `access`.`customeronline` (
  `customer_id` INT(11) NOT NULL,
  `terminal_id` INT(11) NULL DEFAULT NULL,
  PRIMARY KEY (`customer_id`),
  INDEX `fk_customeronline_terminal1_idx` (`terminal_id` ASC),
  CONSTRAINT `fk_customeronline_customer1`
    FOREIGN KEY (`customer_id`)
    REFERENCES `access`.`customer` (`ct_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_customeronline_terminal1`
    FOREIGN KEY (`terminal_id`)
    REFERENCES `access`.`terminal` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `access`.`customerrfm`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `access`.`customerrfm` (
  `id` INT(11) NOT NULL AUTO_INCREMENT,
  `customer_id` INT(11) NULL DEFAULT NULL,
  `lastbuytime` DATETIME NULL DEFAULT NULL,
  `monthbuytimes` INT(11) NULL DEFAULT NULL,
  `lastmonthbuytimes` INT(11) NULL DEFAULT NULL,
  `monthbuysum` INT(11) NULL DEFAULT NULL,
  `lastmonthbuysum` INT(11) NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `FK_customerrfm_customer_idx` (`customer_id` ASC),
  CONSTRAINT `FK_customerrfm_customer`
    FOREIGN KEY (`customer_id`)
    REFERENCES `access`.`customer` (`ct_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
AUTO_INCREMENT = 9
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `access`.`customerrfmsample`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `access`.`customerrfmsample` (
  `id` INT(11) NOT NULL AUTO_INCREMENT,
  `customer_id` INT(11) NULL DEFAULT NULL,
  `level` INT(11) NULL DEFAULT NULL,
  `customerservice_id` INT(11) NULL DEFAULT NULL,
  `recordtime` DATETIME NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `FK_rfmsample_customer_idx` (`customer_id` ASC),
  INDEX `Fk_rfmsample_service_idx` (`customerservice_id` ASC),
  CONSTRAINT `FK_rfmsample_customer`
    FOREIGN KEY (`customer_id`)
    REFERENCES `access`.`customer` (`ct_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `Fk_rfmsample_service`
    FOREIGN KEY (`customerservice_id`)
    REFERENCES `access`.`customerservice` (`cs_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `access`.`customerserviceloginrecord`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `access`.`customerserviceloginrecord` (
  `id` INT(11) NOT NULL,
  `loginip` VARCHAR(45) NULL DEFAULT NULL,
  `loginarea` VARCHAR(45) NULL DEFAULT NULL,
  `logintime` DATETIME NULL DEFAULT NULL,
  `costomerService_id` INT(11) NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_customerserviceloginrecord_costomerservice1_idx` (`costomerService_id` ASC),
  CONSTRAINT `fk_customerserviceloginrecord_costomerservice1`
    FOREIGN KEY (`costomerService_id`)
    REFERENCES `access`.`customerservice` (`cs_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `access`.`customerserviceonline`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `access`.`customerserviceonline` (
  `customerservice_userid` INT(11) NOT NULL,
  `terminal_id` INT(11) NULL DEFAULT NULL,
  PRIMARY KEY (`customerservice_userid`),
  INDEX `fk_customerserviceonline_terminal_idx` (`terminal_id` ASC),
  CONSTRAINT `fk_customerserviceonline_customerservice1`
    FOREIGN KEY (`customerservice_userid`)
    REFERENCES `access`.`customerservice` (`cs_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_customerserviceonline_terminal1`
    FOREIGN KEY (`terminal_id`)
    REFERENCES `access`.`terminal` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `access`.`customerserviceright`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `access`.`customerserviceright` (
  `id` INT(11) NOT NULL,
  `type` VARCHAR(45) NULL DEFAULT NULL,
  `companyid` INT(11) NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `FK_serviceright_company_idx` (`companyid` ASC),
  CONSTRAINT `FK_serviceright_company`
    FOREIGN KEY (`companyid`)
    REFERENCES `access`.`company` (`cp_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `access`.`customerservicerightrole`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `access`.`customerservicerightrole` (
  `customerserviceroleid` INT(11) NOT NULL,
  `customerservicerightid` INT(11) NOT NULL,
  PRIMARY KEY (`customerserviceroleid`, `customerservicerightid`),
  INDEX `FK_rightrole_right_idx` (`customerservicerightid` ASC),
  INDEX `FK_servicerightrole_right_idx` (`customerservicerightid` ASC),
  CONSTRAINT `FK_servicerightrole_right`
    FOREIGN KEY (`customerservicerightid`)
    REFERENCES `access`.`customerserviceright` (`id`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `FK_servicerightrole_role`
    FOREIGN KEY (`customerserviceroleid`)
    REFERENCES `access`.`customerservicerole` (`id`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `access`.`knowledgebase`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `access`.`knowledgebase` (
  `id` INT(11) NOT NULL AUTO_INCREMENT,
  `title` VARCHAR(45) NULL DEFAULT NULL,
  `category` VARCHAR(45) NULL DEFAULT NULL,
  `createtime` DATETIME NULL DEFAULT NULL,
  `content` MEDIUMTEXT NULL DEFAULT NULL,
  `company_id` INT(11) NULL DEFAULT NULL,
  `customerservice_id` INT(11) NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `FK_know_company_idx` (`company_id` ASC),
  INDEX `FK_know_customerservice_idx` (`customerservice_id` ASC),
  CONSTRAINT `FK_know_company`
    FOREIGN KEY (`company_id`)
    REFERENCES `access`.`company` (`cp_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `FK_know_customerservice`
    FOREIGN KEY (`customerservice_id`)
    REFERENCES `access`.`customerservice` (`cs_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
AUTO_INCREMENT = 54
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `access`.`leavingmsg`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `access`.`leavingmsg` (
  `id` INT(11) NOT NULL AUTO_INCREMENT,
  `titile` VARCHAR(45) NULL DEFAULT NULL,
  `content` VARCHAR(255) NULL DEFAULT NULL,
  `companyid` INT(11) NULL DEFAULT NULL,
  `serviceid` INT(11) NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `FK_leavemsg_company_idx` (`companyid` ASC),
  INDEX `FK_leavemsg_service_idx` (`serviceid` ASC),
  CONSTRAINT `FK_leavemsg_company`
    FOREIGN KEY (`companyid`)
    REFERENCES `access`.`company` (`cp_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `FK_leavemsg_service`
    FOREIGN KEY (`serviceid`)
    REFERENCES `access`.`customerservice` (`cs_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `access`.`msgtype`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `access`.`msgtype` (
  `id` INT(11) NOT NULL,
  `type` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `access`.`msg`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `access`.`msg` (
  `id` INT(11) NOT NULL AUTO_INCREMENT,
  `sendtime` DATETIME NULL DEFAULT NULL,
  `content` VARCHAR(255) NULL DEFAULT NULL,
  `sensitiveword` VARCHAR(45) NULL DEFAULT NULL,
  `msgtype_id` INT(11) NOT NULL,
  `customer_id` INT(11) NULL DEFAULT NULL,
  `customerservice_id` INT(11) NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_msg_msgtype_idx` (`msgtype_id` ASC),
  INDEX `fk_msg_customer1_idx` (`customer_id` ASC),
  INDEX `fk_msg_costomerservice1_idx` (`customerservice_id` ASC),
  CONSTRAINT `fk_msg_costomerservice1`
    FOREIGN KEY (`customerservice_id`)
    REFERENCES `access`.`customerservice` (`cs_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_msg_customer1`
    FOREIGN KEY (`customer_id`)
    REFERENCES `access`.`customer` (`ct_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_msg_msgtype`
    FOREIGN KEY (`msgtype_id`)
    REFERENCES `access`.`msgtype` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
AUTO_INCREMENT = 17046
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `access`.`product`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `access`.`product` (
  `id` INT(11) NOT NULL,
  `category_id` INT(11) NULL DEFAULT NULL,
  `name` VARCHAR(255) NULL DEFAULT NULL,
  `price` INT(11) NULL DEFAULT NULL,
  `pic` VARCHAR(255) NULL DEFAULT NULL,
  `remark` VARCHAR(255) NULL DEFAULT NULL,
  `xremark` VARCHAR(255) NULL DEFAULT NULL,
  `status` INT(11) NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `FK_product_category1_idx` (`category_id` ASC),
  CONSTRAINT `FK_product_category1`
    FOREIGN KEY (`category_id`)
    REFERENCES `access`.`category` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `access`.`order`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `access`.`order` (
  `id` INT(11) NOT NULL AUTO_INCREMENT,
  `time` DATETIME NULL DEFAULT NULL,
  `customerservice_id` INT(11) NULL DEFAULT NULL,
  `customer_id` INT(11) NULL DEFAULT NULL,
  `product_id` INT(11) NULL DEFAULT NULL,
  `demandtime` DATETIME NULL DEFAULT NULL,
  `demandaddr` VARCHAR(255) NULL DEFAULT NULL,
  `demandphone` INT(25) NULL DEFAULT NULL,
  `demandotherrequest` VARCHAR(255) NULL DEFAULT NULL,
  `company_id` INT(11) NULL DEFAULT NULL,
  `status` ENUM('finish', 'notfinish', 'waitconfirm', 'cancel') NULL DEFAULT 'notfinish',
  PRIMARY KEY (`id`),
  INDEX `FK_order_product_idx` (`product_id` ASC),
  INDEX `FK_product_company_idx` (`company_id` ASC),
  CONSTRAINT `FK_order_product`
    FOREIGN KEY (`product_id`)
    REFERENCES `access`.`product` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `FK_product_company`
    FOREIGN KEY (`company_id`)
    REFERENCES `access`.`company` (`cp_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
AUTO_INCREMENT = 142
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `access`.`quickmessage`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `access`.`quickmessage` (
  `id` INT(11) NOT NULL AUTO_INCREMENT,
  `content` VARCHAR(255) NULL DEFAULT NULL,
  `customerserviceid` INT(11) NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `FK_quickmsg_customerservice_idx` (`customerserviceid` ASC),
  CONSTRAINT `FK_quickmsg_customerservice`
    FOREIGN KEY (`customerserviceid`)
    REFERENCES `access`.`customerservice` (`cs_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
AUTO_INCREMENT = 8
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `access`.`right`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `access`.`right` (
  `id` INT(11) NOT NULL,
  `type` VARCHAR(45) NULL DEFAULT NULL,
  `companyid` INT(11) NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `FK_right_company_idx` (`companyid` ASC),
  CONSTRAINT `FK_right_company`
    FOREIGN KEY (`companyid`)
    REFERENCES `access`.`company` (`cp_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `access`.`robotknowledgebase`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `access`.`robotknowledgebase` (
  `id` INT(11) NOT NULL AUTO_INCREMENT,
  `title` VARCHAR(45) NULL DEFAULT NULL,
  `category` VARCHAR(45) NULL DEFAULT NULL,
  `createtime` DATETIME NULL DEFAULT NULL,
  `content` MEDIUMTEXT NULL DEFAULT NULL,
  `company_id` INT(11) NULL DEFAULT NULL,
  `searchcount` INT(11) NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `FK_robotknow_company_idx` (`company_id` ASC),
  CONSTRAINT `FK_robotknow_company`
    FOREIGN KEY (`company_id`)
    REFERENCES `access`.`company` (`cp_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
AUTO_INCREMENT = 4
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `access`.`role`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `access`.`role` (
  `id` INT(11) NOT NULL,
  `type` VARCHAR(45) NULL DEFAULT NULL,
  `companyid` INT(11) NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `FK_role_company_idx` (`companyid` ASC),
  CONSTRAINT `FK_role_company`
    FOREIGN KEY (`companyid`)
    REFERENCES `access`.`company` (`cp_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `access`.`roleright`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `access`.`roleright` (
  `roleid` INT(11) NOT NULL,
  `rightid` INT(11) NOT NULL,
  PRIMARY KEY (`roleid`, `rightid`),
  INDEX `FK_rightrole_right_idx` (`rightid` ASC),
  CONSTRAINT `FK_rightrole_right`
    FOREIGN KEY (`rightid`)
    REFERENCES `access`.`right` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `FK_rightrole_role`
    FOREIGN KEY (`roleid`)
    REFERENCES `access`.`role` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `access`.`userrole`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `access`.`userrole` (
  `userid` INT(11) NOT NULL,
  `roleid` INT(11) NOT NULL,
  PRIMARY KEY (`userid`, `roleid`),
  INDEX `FK_userrole_role_idx` (`roleid` ASC),
  CONSTRAINT `FK_userrole_role`
    FOREIGN KEY (`roleid`)
    REFERENCES `access`.`role` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `FK_userrole_user`
    FOREIGN KEY (`userid`)
    REFERENCES `access`.`customerservice` (`cs_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `access`.`waitonline`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `access`.`waitonline` (
  `customer_id` INT(11) NOT NULL,
  `begintime` DATETIME NULL DEFAULT NULL,
  `realtime` DATETIME NULL DEFAULT NULL,
  PRIMARY KEY (`customer_id`),
  INDEX `fk_wait_customer1_idx` (`customer_id` ASC),
  CONSTRAINT `fk_wait_customer1`
    FOREIGN KEY (`customer_id`)
    REFERENCES `access`.`customer` (`ct_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `access`.`waitserviceonline`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `access`.`waitserviceonline` (
  `cs_id` INT(11) NOT NULL,
  `begintime` DATETIME NULL DEFAULT NULL,
  `cs_windowtotal` INT(11) NULL DEFAULT NULL,
  `cs_windowremain` INT(11) NULL DEFAULT NULL,
  PRIMARY KEY (`cs_id`),
  CONSTRAINT `FK_customerwait`
    FOREIGN KEY (`cs_id`)
    REFERENCES `access`.`customerservice` (`cs_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
